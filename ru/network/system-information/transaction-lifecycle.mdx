---
- title: Жизненный цикл транзакции
---

## Рабочий процесс L2 -> L1 [→](https://docs-v2.mantle.xyz/devs/concepts/tx-lifecycle#l2---l1-workflow)

### Инициация [→](https://docs-v2.mantle.xyz/devs/concepts/tx-lifecycle#1-the-initiation)

Пользователи кошельков, dApps или некоторые скрипты могут захотеть использовать систему на основе блокчейна для перевода средств или выполнения задач.

* Для пользователей, они подключились к сети Mantle, добавив конечную точку RPC узла секвенсора в свой кошелек.

* С другой стороны, dApps интегрировали [Mantle SDK](https://sdk.mantle.xyz/index.html) и инициализировали его для связи с сетью Mantle. Они готовы отправлять запросы, содержащие адрес получателя и сумму, которую они хотят перевести.

Как и любая другая услуга, эта операция требует оплаты. Это не только для самого перевода, но и для поддержания постоянной, неизменяемой публичной записи, которую каждый может проверить. Их кошелек или dApp должны убедиться, что есть достаточный баланс для выполнения этой операции.

* Для кошельков все проще; так как легче рассчитать необходимую комиссию.

* dApps нужно делать более детальные расчеты; для получения дополнительной информации, пожалуйста, обратитесь к этому [разделу](/network/system-information/fee-mechanism).

Они используют имеющиеся инструменты для составления запроса, подписывают его с помощью своих приватных ключей и отправляют в сеть Mantle, где секвенсор готов его обработать. Здесь транзакция впервые попадает в Mantle. Подробнее [здесь](/network/system-information/off-chain-system/node-introduction#sequencer).

### Обработка [→](https://docs-v2.mantle.xyz/devs/concepts/tx-lifecycle#2-the-handling)

Транзакция запускает стандартный процесс проверки состояния, выполняемый программным обеспечением Ethereum Virtual Machine (EVM) ([`op-geth`](/network/system-information/off-chain-system/node-introduction#op-geth)), работающим на этих узлах. Это нужно для того, чтобы убедиться, что транзакция фундаментально действительна, необходимые комиссии были уплачены, и ничего исключительного не произошло. После завершения перехода состояния, [`op-proposer`](/network/system-information/off-chain-system/node-introduction#op-proposer) предлагает корень Меркла нового состояния и отправляет его в соответствующий контракт L1.

<Info>
  Важно отметить, что отправка состояния не обязательно должна выполняться после каждой транзакции, но может быть выбрана для отправки после пакета транзакций.
</Info>

Транзакция обновляет локальное состояние (реестр) и ожидает дальнейшей обработки в составе ожидающего блока. До сих пор этот процесс особенно быстрый. Многие такие ожидающие блоки объединяются в пакеты, которые кодируются и сжимаются [`op-batcher`](/network/system-information/off-chain-system/node-introduction#op-batcher) и отправляются в Ethereum для окончательного расчета. L2 достигает низких комиссий за транзакции, распределяя фиксированные затраты на несколько транзакций в пакете.

<Info>
  Для получения подробной информации о процессе кодирования и сжатия op-batcher, пожалуйста, обратитесь к этой [спецификации](https://github.com/mantlenetworkio/mantle-v2/blob/develop/specs/derivation.md#batch-submission).
</Info>

### Хранение [→](https://docs-v2.mantle.xyz/devs/concepts/tx-lifecycle#3-the-storage)

В отличие от типичных Rollups, сеть Mantle стремится к более эффективным и экономичным гарантиям доступности данных (DA). Поэтому она выбирает EigenDA, разработанный на основе стороннего компонента DA. `op-batcher` должен отправлять все данные транзакций (не сырые транзакции) в EigenDA для обеспечения целостности и эффективности сети L2. Узлы DA синхронизируют данные блоков и обеспечивают доступ к ним в любое время в обмен на вознаграждение за предоставление этой услуги. Для получения более подробной информации, пожалуйста, смотрите этот раздел.

EigenDA поддерживает хранение данных и обратное выведение, обеспечивая доступность данных. Помимо хранения данных, хранение состояния также имеет решающее значение.

В Ethereum есть полная сеть доверия, готовая проверить обновленный корень состояния, хранящийся в контракте. Как только блок проходит механизм консенсуса Ethereum, он записывается в безопасную цепочку. Переход состояния считается действительным, как только загруженный корень состояния проходит период оспаривания (обычно 7 дней).
